<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8" />
   <title>Rural Digital Opportunity Fund Areas</title>
   <link rel="stylesheet" href="https://js.arcgis.com/4.12/esri/themes/light/main.css"/>
   <script src="https://js.arcgis.com/4.12/"></script>
   <script src="https://kit.fontawesome.com/073f2168c2.js" crossorigin="anonymous"></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
   <link rel="stylesheet" href="css/styles.css">

    
  
</head>
    <style>

    
   #helptext {
        position: fixed;
        height: 105px;
        font-family: arial;
        margin: 5px;
        padding: 10px;
        z-index: 40;
        background: #FFFF;
        color: #444;
        width: 385px;
        left: 65px;
        top: 15px;
        border-color: #212223;
        border-width: 1px;
        border-style: solid;
             } 
  
  #splitblocks {
        position: fixed;
        height: auto;
        font-family: arial;
        padding: 10px;
        z-index: 40;
        color: #444;
        width: auto;
        left: 310px;
        top: 105px;
             } 
             
              
     #toggle_area {
        border-radius: 10px;
        position: fixed;
        height: auto;
        font-family: arial;
        z-index: 40;
        background: #D3D3D3;
        color: #444;
        width: auto;
        left: 86px;
        top: 110px;

             } 


       #slider {
        position: fixed;
        height: auto;
        font-family: arial;
        padding: 10px;
        z-index: 40;
        background: #ffffff;
        color: #444;
        width: auto;
        left: 10px;
        bottom: 100px;
        border-color: #212223;
        border-width: 1px;
        border-style: solid;
             } 
             
            


        #basemap_widget {
        position: fixed;
        height: 11px;
        font-family: arial;
        padding: 10px;
        z-index: 40;
        background: #ffffff;
        color: #444;
        width: 11.5px;
        top: 222px;
        left: 115px;
        margin-top: -50px;
        margin-left: -100px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }     


        #slider_widget {
        position: fixed;
        height: 11px;
        font-family: arial;
        padding: 10px;
        z-index: 40;
        background: #ffffff;
        color: #444;
        width: 11.5px;
        top: 261px;
        left: 115px;
        margin-top: -50px;
        margin-left: -100px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
             }    


        #slider_menu {
        position: fixed;
        height: 40px;
        font-family: arial;
        padding: 10px;
        z-index: 40;
        background: #ffffff;
        color: #444;
        width: 150px;
        top: 300px;
        left: 115px;
        margin-top: -50px;
        margin-left: -100px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
             } 

        #basemap_menu {
        position: fixed;
        height: 74px;
        font-family: arial;
        padding: 10px;
        z-index: 40;
        background: #ffffff;
        color: #444;
        width: 150px;
        top: 300px;
        left: 115px;
        margin-top: -50px;
        margin-left: -100px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
             } 
             
         #show_legend_button {
        bottom: 25px;
        height: 28px;
        margin: 5px;
        position: absolute;
        text-align: left;
        width: 30px;
        z-index: 40;
        left: 12px;
              }       
   
        #show_menu_button{
        top: 15px;
        height: 28px;
        margin: 5px;
        position: absolute;
        text-align: left;
        width: 30px;
        z-index: 40;
        left: 65px;
         }      
   

  
  #basemap_widget:hover{cursor: pointer; background-color:#F0F0F0; transition: background-color 125ms ease-in-out;}
  #slider_widget:hover{cursor: pointer; background-color:#F0F0F0; transition: background-color 125ms ease-in-out;}
     
     
  menutitle {
  display: block;
  margin-top: 0em;
  margin-bottom: 1em;
  margin-left: 0;
  margin-right: 0;
}
     
     
     
 </style>

    <script>
    
    
    
      
require([
  'esri/Map',
  'esri/views/MapView',
  'esri/Basemap',
  'esri/layers/VectorTileLayer',
  'esri/layers/FeatureLayer',
  'esri/layers/WebTileLayer',
  'esri/widgets/Search',
  'esri/widgets/Home',
  'esri/widgets/Locate',
  "esri/portal/Portal",
  "esri/identity/OAuthInfo",
  "esri/identity/IdentityManager",
  "esri/portal/PortalQueryParams",
  "esri/widgets/Legend",
  "esri/PopupTemplate",
  "esri/geometry/Point",
  "esri/layers/TileLayer",
  "esri/layers/MapImageLayer",
  "esri/widgets/smartMapping/OpacitySlider",
  "esri/widgets/BasemapToggle",
  "esri/core/Collection",
  "esri/core/watchUtils"
],
    function (Map, MapView, Basemap, VectorTileLayer, FeatureLayer, WebTileLayer, Search, Home, Locate, Portal,
               OAuthInfo, esriId, PortalQueryParams, Legend, PopupTemplate, Point, TileLayer, MapImageLayer, OpacitySlider, BasemapToggle, Collection, watchUtils) {
      var map, view, searchWidget, homeBtn, locateBtn
      var layers = window.layers
      var featLayers = []
      
      
 var info = new OAuthInfo({
   appId: "ilUD28Q0NqmDjSX8",
   popup: false
 });

esriId.registerOAuthInfos([info]);    

 function setGlobalLegendVal() {
window.legends_hidden = 2;
}

setGlobalLegendVal(); 


var dojoConfig = {
    has: {
      "esri-featurelayer-webgl": 1
    }
  };


      // Create map
      map = new Map({
        basemap: "streets-navigation-vector"
      })

      // Make map view and bind it to the map
      view = new MapView({
        container: 'map',
        map: map,
        center: [-74, 41],
        zoom: 6,
        constraints: {
          minZoom: 6,
          maxZoom: 13,
          rotationEnabled: false
        }
      })



     // Add search widget
      searchWidget = new Search({
        view: view
      })

        // Position search widget
      view.ui.add(searchWidget, {
        position: 'top-right'
      })
        // Add Home widget
      homeBtn = new Home({
        view: view
      })

        // Position Home widget
      view.ui.add(homeBtn, 'top-left')

        // Add locate widget
      locateBtn = new Locate({
        view: view
      })

        // Position locate widget
      view.ui.add(locateBtn, {
        position: 'top-left'
      })

          
          
      
   view.watch("extent", function(currentExtent) {
    window.lat_center = currentExtent.center.latitude,
    window.long_center = currentExtent.center.longitude
   });
           
      //  Click Event for Close Open Windows and Print Zoom to Console
       view.on("click", function(){
       console.log(view.zoom)  
       $("#basemap_menu").fadeOut(100);
       $("#slider_menu").fadeOut(100);
       });    
          
  // Set Global Legend Value        
   window.legends_hidden = 2;


     // Button actions to change the basemap
     var BM1 = document.getElementById('BM1')
     var BM2 = document.getElementById('BM2')
     var BM3 = document.getElementById('BM3')
 
    // Set Light(Default) to checked on load in basemap menu
     $(function() {
    var $radios = $('input:radio[name=BM_Button]');
    if($radios.is(':checked') === false) {
        $radios.filter('[value=BM1]').prop('checked', true);
    }
});
     
    // Set Light(Default) to checked on load in main menu
     $(function() {
    var $radios_main = $('input:radio[name=Button]');
    if($radios_main.is(':checked') === false) {
        $radios_main.filter('[value=B1]').prop('checked', true);
    }
});     

    // Toggle Basemaps      
     BM1.addEventListener('click', function(){
     map.basemap = "streets-navigation-vector"
     console.log(map.basemap)
     })   
     
     BM2.addEventListener('click', function(){
     map.basemap = "dark-gray-vector"
     })   
     
     BM3.addEventListener('click', function(){
     map.basemap = "satellite"
     })   
        

        
        
        
          
      // Set all of the popup templates
      
          var cbg_locs_template = {
          // autocasts as new PopupTemplate()
          title: "Block Group: {cbg_final_}",
          content: [
            {
              type: "fields",
              fieldInfos: [
                {
                  fieldName: "auction9_3",
                  label: "Locations:",
                    format: {
                    digitSeparator: true,
                    places: 0
                    }
                },
                  {
                  fieldName: "auction9_4",
                  label: "Annual Reserve Price ($):",
                    format: {
                    digitSeparator: true,
                    places: 0
                    }
                }
              ]
            }
          ]
        };
      
         var cbg_support_template = {
          // autocasts as new PopupTemplate()
          title: "Block Group: {cbg_final_}",
          content: [
            {
              type: "fields",
              fieldInfos: [
                {
                  fieldName: "auction9_3",
                  label: "Locations:",
                    format: {
                    digitSeparator: true,
                    places: 0
                    }
                },
                  {
                  fieldName: "auction9_4",
                  label: "Annual Reserve Price ($):",
                    format: {
                    digitSeparator: true,
                    places: 0
                    }
                }
              ]
            }
          ]
        };
      
       var tracts_locs_template = {
          title: "Tract: {tract_fina}",
          content: [
            {

              type: "fields",
              fieldInfos: [
                {
                  fieldName: "auction9_3",
                  label: "Locations:",
                    format: {
                    digitSeparator: true,
                    places: 0
                    }
                },
                 {
                  fieldName: "auction9_4",
                  label: "Annual Reserve Price ($):",
                    format: {
                    digitSeparator: true,
                    places: 0
                    }
                }
              ]
            }
          ]
        };
      
      
         var tracts_support_template = {
          title: "Tract: {tract_fina}",
          content: [
            {

              type: "fields",
              fieldInfos: [
                {
                  fieldName: "auction9_3",
                  label: "Locations:",
                    format: {
                    digitSeparator: true,
                    places: 0
                    }
                },
                 {
                  fieldName: "auction9_4",
                  label: "Annual Reserve Price ($):",
                    format: {
                    digitSeparator: true,
                    places: 0
                    }
                }
              ]
            }
          ]
        };
      
      
          var tracts_area_template = {
          title: "Tract: {tract_fina}",
          content: [
            {

              type: "fields",
              fieldInfos: [
                {
                  fieldName: "auction9_3",
                  label: "Locations:",
                    format: {
                    digitSeparator: true,
                    places: 0
                    }
                },
                 {
                  fieldName: "auction9_4",
                  label: "Annual Reserve Price ($):",
                    format: {
                    digitSeparator: true,
                    places: 0
                    }
                }
              ]
            }
          ]
        };
      
          var cbg_area_template = {
          // autocasts as new PopupTemplate()
          title: "Block Group: {cbg_final_}",
          content: [
            {
              type: "fields",
              fieldInfos: [
                {
                  fieldName: "auction9_3",
                  label: "Locations:",
                    format: {
                    digitSeparator: true,
                    places: 0
                    }
                },
                  {
                  fieldName: "auction9_4",
                  label: "Annual Reserve Price ($):",
                    format: {
                    digitSeparator: true,
                    places: 0
                    }
                }
              ]
            }
          ]
        };
      
      
      
   // Hide Windows on load   
    $("#elig_support_legend").hide();
    $("#elig_locs_legend").hide();
    $("#warning").hide();
    
    $("#elig_support_tracts_legend").hide();
    $("#elig_locations_tracts_legend").hide();
    
    $("#split_blocks_legend_low").hide();
    $("#split_blocks_legend_high").hide();

      var maxScale = 9244667.357954139;
      var minScale = 9244666.357954139;

  //   Create vector tile layers and feature layers for data
      var Coverage_Area_Tracts_With_Border = new VectorTileLayer({
      url: 'https://tiles.arcgis.com/tiles/YnOQrIGdN9JGtBh4/arcgis/rest/services/test/VectorTileServer'}) 
      Coverage_Area_Tracts_With_Border.minScale = minScale;
      
      var Coverage_Area_Blocks_With_Border = new VectorTileLayer({
      url: 'https://tiles.arcgis.com/tiles/YnOQrIGdN9JGtBh4/arcgis/rest/services/Coverage_Area_CBG_With_Border/VectorTileServer',
      visible:false}) 
      Coverage_Area_Blocks_With_Border.minScale = minScale;
    
  
      var Coverage_Area_Tracts_No_Border = new VectorTileLayer({
      url: 'https://tiles.arcgis.com/tiles/YnOQrIGdN9JGtBh4/arcgis/rest/services/Coverage_Area_Tracts_Without_Border/VectorTileServer'}) 
      Coverage_Area_Tracts_No_Border.maxScale = maxScale;


      var Locations_Blocks_No_Border = new VectorTileLayer({
      url: 'https://tiles.arcgis.com/tiles/YnOQrIGdN9JGtBh4/arcgis/rest/services/Locations_CGB_Without_Border/VectorTileServer',
      visible: false})
      Locations_Blocks_No_Border.maxScale = maxScale;
      
      var Reserve_Blocks_No_Border = new VectorTileLayer({
      url: 'https://tiles.arcgis.com/tiles/YnOQrIGdN9JGtBh4/arcgis/rest/services/Reserve_CBG_Without_Border/VectorTileServer',
      visible: false}) 
      Reserve_Blocks_No_Border.maxScale = maxScale;
       
            
      var Locations_No_Border_Tracts = new VectorTileLayer({
      url: 'https://tiles.arcgis.com/tiles/YnOQrIGdN9JGtBh4/arcgis/rest/services/Locations_Tract_Without_Border/VectorTileServer',
      visible: false})
      Locations_No_Border_Tracts.maxScale = maxScale;
      
      var Reserve_Tracts_No_Border = new VectorTileLayer({
      url: 'https://tiles.arcgis.com/tiles/YnOQrIGdN9JGtBh4/arcgis/rest/services/Reserve_Tract_Without_Border/VectorTileServer',
      visible: false})
      Reserve_Tracts_No_Border.maxScale = maxScale;


      var split_blocks = new VectorTileLayer({
      url: 'https://tiles.arcgis.com/tiles/YnOQrIGdN9JGtBh4/arcgis/rest/services/Partially_Eligible_Blocks/VectorTileServer',
      visible: false})
      

      var BlocksFeatureLayer = new FeatureLayer({
      url: "https://services.arcgis.com/YnOQrIGdN9JGtBh4/arcgis/rest/services/CBG_FeatureLayer/FeatureServer",
      visible: false
      });
      BlocksFeatureLayer.minScale = 2199999;         
              
      var TractFeatureLayer = new FeatureLayer({url:  "https://services.arcgis.com/YnOQrIGdN9JGtBh4/arcgis/rest/services/RDOF_PhaseOneTracts/FeatureServer"
      });
        
      var Reserve_Tracts_With_Border = new VectorTileLayer({
      url: 'https://tiles.arcgis.com/tiles/YnOQrIGdN9JGtBh4/arcgis/rest/services/Reserve_Tract_With_Border/VectorTileServer',
      visible: false})
      Reserve_Tracts_With_Border.minScale = minScale;
      
      var Locations_Tract_With_Border = new VectorTileLayer({
      url: 'https://tiles.arcgis.com/tiles/YnOQrIGdN9JGtBh4/arcgis/rest/services/Locations_Tract_With_Border/VectorTileServer',
      visible: false})
      Locations_Tract_With_Border.minScale = minScale;
      
       var Locations_Blocks_With_Border = new VectorTileLayer({
      url: 'https://tiles.arcgis.com/tiles/YnOQrIGdN9JGtBh4/arcgis/rest/services/Locations_CBG_With_Border/VectorTileServer',
      visible: false})
      Locations_Blocks_With_Border.minScale = minScale;
      
      var Reserve_Blocks_With_Border = new VectorTileLayer({
      url: 'https://tiles.arcgis.com/tiles/YnOQrIGdN9JGtBh4/arcgis/rest/services/Reserve_CBG_With_Border/VectorTileServer',
      visible: false})
      Reserve_Blocks_With_Border.minScale = minScale;
       
    

      // Add tile layers to map
        map.add(Coverage_Area_Tracts_No_Border);
        map.add(Locations_Blocks_No_Border); 
        map.add(Locations_Blocks_With_Border);
  
        map.add(Locations_No_Border_Tracts);
        map.add(Locations_Tract_With_Border);
  
        map.add(Reserve_Blocks_No_Border); 
        map.add(Reserve_Blocks_With_Border);
  
        map.add(Reserve_Tracts_No_Border);
        map.add(Reserve_Tracts_With_Border);
  
        map.add(Coverage_Area_Tracts_With_Border); 
        map.add(Coverage_Area_Blocks_With_Border);
  
         map.add(split_blocks)  
      
         map.add(BlocksFeatureLayer);
         map.add(TractFeatureLayer);
       

    
        // Opacity Slider Stuff 
       var slider =  document.getElementById("sliderobject")
    
  
      
       slider.oninput = function() {
     window.adj_val = 1 - this.value
       Coverage_Area_Tracts_No_Border.opacity = window.adj_val;
       Locations_Blocks_No_Border.opacity = window.adj_val;
       Locations_Blocks_With_Border.opacity = window.adj_val;
  
       Locations_No_Border_Tracts.opacity = window.adj_val;
       Locations_Tract_With_Border.opacity = window.adj_val;
  
       Reserve_Blocks_No_Border.opacity = window.adj_val;
       Reserve_Blocks_With_Border.opacity = window.adj_val;
  
       Reserve_Tracts_No_Border.opacity = window.adj_val;
       Reserve_Tracts_With_Border.opacity = window.adj_val;
  
       Coverage_Area_Tracts_With_Border.opacity = window.adj_val;
       Coverage_Area_Blocks_With_Border.opacity = window.adj_val; 
 };  
         

     var area_toggle = document.getElementById("b"); 
      
      
     
  
   // Set Default (Area) FeatureLayer Popup Templates 
     BlocksFeatureLayer.popupTemplate = cbg_area_template;
     TractFeatureLayer.popupTemplate = tracts_area_template
      
      
      
   // Create event listener and button actions for eligible area layer and legend
      var elig_area_toggle = document.getElementById("B1");
      document.getElementById("elig_area_legend").style.visibility = 'visible';
      
      // Actions for Eligible Area Block Groups For When Legend is Hidden (1) and Shown(2)
      elig_area_toggle.addEventListener("change", function() {
      console.log(window.legends_hidden)
  
   if (area_toggle.checked == true && window.legends_hidden == 1) {
      console.log('hi10')  
      $("#show_legend_button").fadeIn(200);
      BlocksFeatureLayer.popupTemplate = cbg_area_template;
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = true;
      Coverage_Area_Tracts_No_Border.visible = true;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      $("#split_blocks_legend_low").fadeOut("fast");
      $("#split_blocks_legend_high").fadeOut("fast");
      } 
      
      else if (area_toggle.checked == true && window.legends_hidden == 2) {
      console.log('hi4')  
      $("#show_legend_button").fadeOut(200);
      BlocksFeatureLayer.popupTemplate = cbg_area_template;
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = true;
      Coverage_Area_Tracts_No_Border.visible = true;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      $("#elig_area_legend").fadeIn("fast");
      $("#elig_support_tracts_legend").fadeOut("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      }  
       
      // Actions for Eligible Area Tracts For When Legend is Hidden (1) and Shown(2)
      if (area_toggle.checked == false && window.legends_hidden == 1) {
      console.log('hi1')
      $("#show_legend_button").fadeIn(200);
      TractFeatureLayer.popupTemplate = tracts_area_template;
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = true;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = true;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      $("#split_blocks_legend_low").fadeOut("fast");
      $("#split_blocks_legend_high").fadeOut("fast");
      } 
      
      else if (area_toggle.checked == false && window.legends_hidden == 2) {
      console.log('hi2')    
      $("#show_legend_button").fadeOut(200);
      TractFeatureLayer.popupTemplate = tracts_area_template;
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = true;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = true;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      $("#elig_area_legend").fadeIn("fast");
      $("#elig_support_tracts_legend").fadeOut("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      }
      
      
  });
      

    // Create event listener and button actions for eligible locations layer and legend
       var elig_locs_toggle = document.getElementById("B2");
      document.getElementById("elig_locs_legend").style.visibility = 'visible';
      
      // Actions for Eligible Locations Block Groups For When Legend is Hidden (1) and Shown(2)
      elig_locs_toggle.addEventListener("change", function() {
         
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = true;
      if (area_toggle.checked == true && window.legends_hidden == 1) {
      $("#show_legend_button").fadeIn(200);
      BlocksFeatureLayer.popupTemplate = cbg_area_template;
      Locations_Blocks_With_Border.visible = true;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = true;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      //$("#elig_locs_legend").fadeIn("fast");
      $("#split_blocks_legend_low").fadeOut("fast");
      $("#split_blocks_legend_high").fadeOut("fast");
      } 
      
      else if (area_toggle.checked == true && window.legends_hidden == 2) {
      $("#show_legend_button").fadeOut(200);
      BlocksFeatureLayer.popupTemplate = cbg_area_template;
      Locations_Blocks_With_Border.visible = true;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = true;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      
      }  
       
      // Actions for Eligible Locations Tracts For When Legend is Hidden (1) and Shown(2)
      if (area_toggle.checked == false && window.legends_hidden == 1) {
      $("#show_legend_button").fadeIn(200);
      TractFeatureLayer.popupTemplate = tracts_locs_template;
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = true;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = true;
      Reserve_Tracts_No_Border.visible = false;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      $("#split_blocks_legend_low").fadeOut("fast");
      $("#split_blocks_legend_high").fadeOut("fast");
      } 
      
      else if (area_toggle.checked == false && window.legends_hidden == 2) { 
      $("#show_legend_button").fadeOut(200);
      TractFeatureLayer.popupTemplate = tracts_locs_template;
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = true;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = true;
      Reserve_Tracts_No_Border.visible = false;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeOut("fast");
      $("#elig_locations_tracts_legend").fadeIn("fast");
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      } 
      
     
  }); 

       // Create event listener and button actions for eligible suport layer and legend
      var elig_support_toggle = document.getElementById("B3");
      document.getElementById("elig_support_legend").style.visibility = 'visible';
      
      // Actions for Eligible Support Block Groups For When Legend is Hidden (1) and Shown(2)
      elig_support_toggle.addEventListener("change", function() {
     

     if (area_toggle.checked == true && window.legends_hidden == 1) {
      $("#show_legend_button").fadeIn(200);
      BlocksFeatureLayer.popupTemplate = cbg_area_template;
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = true;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = true;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      $("#split_blocks_legend_low").fadeOut("fast");
      $("#split_blocks_legend_high").fadeOut("fast");
      } 
      
      else if (area_toggle.checked == true && window.legends_hidden == 2) {
      $("#show_legend_button").fadeOut(200);
      BlocksFeatureLayer.popupTemplate = cbg_support_template;
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = true;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false; 
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = true;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeOut("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_legend").fadeIn("fast");
      $("#elig_locs_legend").fadeOut("fast");
      }  
       
      // Actions for Eligible Locations Tracts For When Legend is Hidden (1) and Shown(2)
      if (area_toggle.checked == false && window.legends_hidden == 1) {
      $("#show_legend_button").fadeIn(200);
      TractFeatureLayer.popupTemplate = tracts_support_template;
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = true;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = true;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      $("#split_blocks_legend_low").fadeOut("fast");
      $("#split_blocks_legend_high").fadeOut("fast");
      } 
      
      else if (area_toggle.checked == false && window.legends_hidden == 2) {
      $("#show_legend_button").fadeOut(200);
      TractFeatureLayer.popupTemplate = tracts_locs_template;
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = true;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = true;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeIn("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      } 
      
 
      
  });
      
    // Create event listener and button actions for spit blocks and legend
      var split_blocks_toggle = document.getElementById("C1");
      split_blocks_toggle.addEventListener("change", function() {
      split_blocks.visible = split_blocks_toggle.checked;
  });


    // Create event listener and button actions for block groups/tracts toggle
     // Create Event Actions for Toggling the Feature Layers On and Off
      var area_toggle = document.getElementById("b");
      area_toggle.addEventListener("change", function() {
        
      
      window.beginZoom = view.get('zoom');
        
 
      watchUtils.when(view, "stationary", function() {
      const currentZoom = view.get('zoom');
      if (currentZoom == 9 && area_toggle.checked == true && elig_locs_toggle.checked == true && window.legends_hidden == 2) {
      $("#show_legend_button").fadeOut(200);
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = true;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      Locations_Blocks_With_Border.visible = true;
      BlocksFeatureLayer.popupTemplate = cbg_locs_template;
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeIn("fast");
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeOut("fast");   
      console.log('Now you are zoomed in.')
        }
      });  
        
    
      view.popup.close()
        
      if (area_toggle.checked == true && window.beginZoom < 9){
      BlocksFeatureLayer.visible = true;
      TractFeatureLayer.visible = false;
      view.goTo({center: [window.long_center, window.lat_center], zoom: 9},
                {duration: 500, easing: "linear"}); 
      view.constraints.minZoom = 9;
      } 
      else if (area_toggle.checked == true && window.beginZoom >= 9){
      BlocksFeatureLayer.visible = true;
      TractFeatureLayer.visible = false;
      view.constraints.minZoom = 9;  
      }
        
      else if (area_toggle.checked == false){
      BlocksFeatureLayer.visible = false;
      TractFeatureLayer.visible = true;
      view.constraints.minZoom = 6;  
      }; 
      
    
      
      // If Conditions for Coverage Block Group for When the Legend is Hidden (1) and Shown (2)
      if (area_toggle.checked == true && elig_area_toggle.checked == true && window.legends_hidden == 1){
      $("#show_legend_button").fadeIn(200);
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = true;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = true;
      BlocksFeatureLayer.popupTemplate = cbg_area_template;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      //$("#elig_locs_legend").fadeIn("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeOut("fast");
      } else if (area_toggle.checked == true && elig_area_toggle.checked == true &&  window.legends_hidden == 2){
      $("#show_legend_button").fadeOut(200);
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = true;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false; 
      Coverage_Area_Blocks_With_Border.visible = true;
      BlocksFeatureLayer.popupTemplate = cbg_area_template;
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      $("#elig_area_legend").fadeIn("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeOut("fast"); 
      }
      
    //  If Conditions for Coverage Tracts for When the Legend is Hidden (1) and Shown (2)
      if (area_toggle.checked == false && elig_area_toggle.checked == true && window.legends_hidden == 1){
      $("#show_legend_button").fadeIn(200);
      Coverage_Area_Tracts_With_Border.visible = true;
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = true;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;;
      TractFeatureLayer.popupTemplate = tracts_locs_template;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      //$("#elig_locs_legend").fadeIn("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeOut("fast");
      } else if (area_toggle.checked == false && elig_area_toggle.checked == true &&  window.legends_hidden == 2){
      $("#show_legend_button").fadeOut(200);
      Coverage_Area_Tracts_With_Border.visible = true; 
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = true;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      TractFeatureLayer.popupTemplate = tracts_locs_template;
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      $("#elig_area_legend").fadeIn("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeOut("fast"); 
      }
      
      
      // If Conditions for Locations Block Group for When the Legend is Hidden (1) and Shown (2)
      if (area_toggle.checked == true && elig_locs_toggle.checked == true && window.legends_hidden == 1){
      $("#show_legend_button").fadeIn(200);
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = true;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      Locations_Blocks_With_Border.visible = true;
 
      BlocksFeatureLayer.popupTemplate = cbg_locs_template;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      //$("#elig_locs_legend").fadeIn("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeOut("fast");
      } else if (area_toggle.checked == true && elig_locs_toggle.checked == true && window.legends_hidden == 2){
      $("#show_legend_button").fadeOut(200);
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = true;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      Locations_Blocks_With_Border.visible = true;
      BlocksFeatureLayer.popupTemplate = cbg_locs_template;
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeIn("fast");
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeOut("fast"); 
      }
      
      
      // If Conditions for Locations Tracts for When the Legend is Hidden (1) and Shown (2)
      if (area_toggle.checked == false && elig_locs_toggle.checked == true && window.legends_hidden == 1){
      $("#show_legend_button").fadeIn(200);
      Locations_Tract_With_Border.visible = true;
      Locations_Blocks_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = true;
      Reserve_Tracts_No_Border.visible = false;
      TractFeatureLayer.popupTemplate = tracts_locs_template;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeOut("fast");
      } else if (area_toggle.checked == false && elig_locs_toggle.checked == true &&  window.legends_hidden == 2){
      $("#show_legend_button").fadeOut(200);
      Locations_Tract_With_Border.visible = true; 
      Locations_Blocks_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = true;
      Reserve_Tracts_No_Border.visible = false;;
      TractFeatureLayer.popupTemplate = tracts_locs_template;
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_locations_tracts_legend").fadeIn("fast");
      $("#elig_support_tracts_legend").fadeOut("fast"); 
      }
        
      
      // If Conditions for Support Block Group for When the Legend is Hidden (1) and Shown (2)
      if (area_toggle.checked == true && elig_support_toggle.checked == true && window.legends_hidden == 1){
      $("#show_legend_button").fadeIn(200);
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = true;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      Reserve_Blocks_With_Border.visible = true;
      BlocksFeatureLayer.popupTemplate = cbg_support_template;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeOut("fast");
      } else if (area_toggle.checked == true && elig_support_toggle.checked == true &&  window.legends_hidden == 2){
      $("#show_legend_button").fadeOut(200);
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Tracts_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = true;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = false;
      Reserve_Blocks_With_Border.visible = true;
      BlocksFeatureLayer.popupTemplate = cbg_support_template;
      $("#elig_support_legend").fadeIn("fast");
      $("#elig_locs_legend").fadeOut("fast");
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeOut("fast"); 
      }  

      // If Conditions for Support Tracts for When the Legend is Hidden (1) and Shown (2)
      if (area_toggle.checked == false && elig_support_toggle.checked == true && window.legends_hidden == 1){
      $("#show_legend_button").fadeIn(200);
      Reserve_Tracts_With_Border.visible = true;
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = true;
      TractFeatureLayer.popupTemplate = tracts_support_template;
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeOut("fast");
      } else if (area_toggle.checked == false && elig_support_toggle.checked == true &&  window.legends_hidden == 2){
      $("#show_legend_button").fadeOut(200);
      Reserve_Tracts_With_Border.visible = true; 
      Locations_Blocks_With_Border.visible = false;
      Locations_Tract_With_Border.visible = false;
      Reserve_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_With_Border.visible = false;
      Coverage_Area_Blocks_With_Border.visible = false;
      Coverage_Area_Tracts_No_Border.visible = false;
      Locations_Blocks_No_Border.visible = false;
      Reserve_Blocks_No_Border.visible = false;
      Locations_No_Border_Tracts.visible = false;
      Reserve_Tracts_No_Border.visible = true;
      TractFeatureLayer.popupTemplate = tracts_support_template;
      $("#elig_support_legend").fadeOut("fast");
      $("#elig_locs_legend").fadeOut("fast");
      $("#elig_area_legend").fadeOut("fast");
      $("#elig_locations_tracts_legend").fadeOut("fast");
      $("#elig_support_tracts_legend").fadeIn("fast"); 
      }  

      
 });


    
      var maxScale = 9244667.357954139;
      var minScale = 9244666.357954139;
    
    




























































    // Hide/Show Widgets for Transparency and Layers 
    var slider_wigdet = document.getElementById('slider_widget');
    var slider_stuff = document.getElementById("sliderregion"); 
    var slider_range = document.getElementById("sliderrange"); 


    $(function() {
    $('#slider_menu').addClass('hidden').hide();
    $('#slider_widget').click(function() {
        if ($('#slider_menu').hasClass('hidden') && ($('#basemap_menu').hasClass('hidden'))) {
            $('#slider_menu').removeClass('hidden').fadeIn(200);
            $('#slider_region').removeClass('hidden').fadeIn(200);
             
        }
        else if ($('#slider_menu').hasClass('hidden') && ($('#basemap_menu').hasClass('hidden') == false)){
                 $('#basemap_menu').addClass('hidden').fadeOut(200);
                 $('#slider_menu').removeClass('hidden').fadeIn(200);
                 $('#slider_region').removeClass('hidden').fadeIn(200);
   }        
   else {
             $('#slider_menu').addClass('hidden').fadeOut(200);
        }
    });
     });  



    $(function() {
     $('#basemap_menu').addClass('hidden').hide();
        $('#basemap_widget').click(function() {
        if ($('#basemap_menu').hasClass('hidden') && ($('#slider_menu').hasClass('hidden'))) {
            $('#basemap_menu').removeClass('hidden').fadeIn(200);             
        }
        else if ($('#basemap_menu').hasClass('hidden') && ($('#slider_menu').hasClass('hidden') == false)){
                 $('#slider_menu').addClass('hidden').fadeOut(200);
                 $('#basemap_menu').removeClass('hidden').fadeIn(200);
   }        
   else {
             $('#basemap_menu').addClass('hidden').fadeOut(200);
        }
    });
     });  


$(function(){
  $('#close_elig_area_btn, #close_elig_locs_btn, #close_elig_support_btn, #close_elig_support_tracts_btn, #close_elig_locs_tracts_btn, #close_split_blocks_high_btn, #close_split_blocks_low_btn').click(function(){
    window.legends_hidden = 1
    $("#split_blocks_legend_low").fadeOut(200);
    $("#split_blocks_legend_high").fadeOut(200);
    $("#elig_locations_tracts_legend").fadeOut(200);
    $("#elig_support_tracts_legend").fadeOut(200);
    $("#elig_locs_legend").fadeOut(200);
    $("#elig_support_legend").fadeOut(200);
    $("#elig_area_legend").fadeOut(200);
    $("#show_legend_button").fadeIn(200);  
    });
});

 $(function(){
  $('#show_legend_button').click(function(){
        window.legends_hidden = 2
        if  (elig_area_toggle.checked == true) {
            $("#show_legend_button").fadeOut(200);
            $("#elig_area_legend").fadeIn(200);             
        }   
       else if (elig_locs_toggle.checked == true && area_toggle.checked == false) {
            $("#show_legend_button").fadeOut(200);
            $("#elig_locations_tracts_legend").fadeIn(200);             
        }
       else if (elig_support_toggle.checked == true && area_toggle.checked == false) {
            $("#show_legend_button").fadeOut(200);
            $("#elig_support_tracts_legend").fadeIn(200);             
        }
       else if (elig_support_toggle.checked == true && area_toggle.checked == true) {
            $("#show_legend_button").fadeOut(200);
            $("#elig_support_legend").fadeIn(200);             
        }
        else if (elig_locs_toggle.checked == true && area_toggle.checked == true) {
            $("#show_legend_button").fadeOut(200);
            $("#elig_locs_legend").fadeIn(200);             
        }
      });
    });
 
  
  
  
  $(function(){
  $('#close_menu_btn').click(function(){
    window.legends_hidden = 1
    $("#helptext").fadeOut(200);
    $("#splitblocks").fadeOut(200);
    $("#toggle_area").fadeOut(200);
    $("#show_menu_button").fadeIn(200);  
    });
});

  $(function(){
  $('#show_menu_button').click(function(){
    window.legends_hidden = 1
    $("#helptext").fadeIn(200);
        $("#splitblocks").fadeIn(200);
    $("#toggle_area").fadeIn(200);
    $("#show_menu_button").fadeOut(200);  
    });
});
  
  
  
  
  
  
  
   
  

  });




      
  
      
    </script>

 <body>
    <main class="map-container">
        <div id="btn-openLayerCtrl" class="esri-ui-corner">
            <div class="icon-layers esri-component esri-widget-button esri-widget"></div>
        </div>        
        <div id="map"></div>
        
         <div id="helptext"><strong>&nbsp Select a Rural Digital Opportunity Fund Measure </strong>
         <button id="close_menu_btn" class="close"><span class="close">&times;</span> <span class="sr-only">Hide legend</span></button>
         <br><input type="radio" id="B1" name="Button" value="B1"> <label for="B3">Coverage Area</label>
         <br><input type="radio" id="B2" name="Button" value="B2"> <label for="B2">Eligible Locations</label>
         <br><input type="radio" id="B3" name="Button" value="B3"> <label for="B4">Annual Reserve Price</label><br>
        </div>
        
        <div id ="toggle_area">
        <div class="can-toggle can-toggle--size-small">
  <input id="b" type="checkbox">
  <label for="b">
    <div class="can-toggle__switch" data-checked="Blocks Groups" data-unchecked="Tracts"></div>
    <div class="can-toggle__label-text"></div>
  </label>
</div>

        
        
        
        </div>
        
<button id = "show_legend_button" style="display:none"><i class="fa fa-bars"></i></button><br><br>  
<button id = "show_menu_button" style="display:none"><i class="fa fa-bars"></i></button><br><br>


<div id="basemap_widget" class="pointer">
<span class="fas fa-layer-group"></span>
  </div>
        
      
<sliderwidget id="slider_widget" class="pointer">
<span class="fas fa-sliders-h"></span>
  </sliderwidget>
 
         
<div id="slider_menu"> 
<menutitle><strong>Data layer transparency</strong></menutitle>
<div id = 'sliderobjectregion'></div>
  <div style="width:100% position: center;"><input type="range" min="0" max="1" value = "0.01", step = ".01" id = "sliderobject" style = "display: block"> </div>
 </div> 
 

 
 
 <div id="basemap_menu"> 
         <input class = "radio" type="radio" id="BM1" name="BM_Button" value="BM1"> <label for="B3" class = "radio_text">Streets (Default)</label>
         <br><input class = "radio" type="radio" id="BM2" name="BM_Button" value="BM2"> <label for="B2" class = "radio_text">Dark</label>
         <br><input class = "radio" type="radio" id="BM3" name="BM_Button" value="BM3"> <label for="B4" class = "radio_text">Satellite</label>
 </div> 
         
     
         
         <div id="splitblocks">
         <input type="checkbox" id="C1" name="Checkbox" value="C1"> <label for="C1">Partially Eligible Blocks</label>
         </div>
         
         <div  id="basemap_toggle_region">
         </div>
         
 
        

 
        <div class="map-legend" id='elig_area_legend'>
            <table>
                <thead>
                    <tr>
                    <td colspan="3"><span class="icon icon-list"></span> <span class="map-legend-name"> Coverage Area Legend &nbsp; &nbsp;</span>
                         <button id="close_elig_area_btn" class="close"><span class="close">&times;</span></button>
                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Eligible Area</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#BDD7E7 "></div>
                        </td>
                </tbody>
            </table>
        </div>
       
        
        
        
                <div class="map-legend" id='elig_locs_legend'>
            <table>
                <thead>
                    <tr>
                        <td colspan="3"><span class="icon icon-list"></span> <span class="map-legend-name"> Eligible Locations in Block Groups &nbsp; &nbsp;</span>
                        <button id="close_elig_locs_btn" class="close"><span class="close">&times;</span> <span class="sr-only">Hide legend</span></button>
                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#EDF8FB"></div>
                        </td>
                        <td>0 - 60</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#B3CDE3"></div>
                        </td>
                        <td>61 - 150</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#8C96C6"></div>
                        </td>
                        <td>151 - 300</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#8856A7"></div>
                        </td>
                        <td>301 - 500</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#810F7C"></div>
                        </td>
                        <td>501 - 1250</td>
                    </tr>
            </table>
        </div>
        

                   <div class="map-legend" id='elig_support_legend'>
            <table>
                <thead>
                    <tr>
                        <td colspan="3"><span class="icon icon-list"></span> <span class="map-legend-name"> Annual Reserve Price in Block Groups &nbsp; &nbsp;</span>
                        <button id="close_elig_support_btn" class="close"><span class="close">&times;</span> <span class="sr-only">Hide legend</span></button>

                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#EDF8FB"></div>
                        </td>
                        <td>0 - $35,000</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#B2E2E2 "></div>
                        </td>
                        <td>$35,001 - $95,000</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#56B990"></div>
                        </td>
                        <td>$95,001 - $185,000</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#2CA25F"></div>
                        </td>
                        <td>$185,001 - $350,000</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#006D2C"></div>
                        </td>
                        <td>$350,001 - $950,000</td>
                    </tr>
            </table>
        </div>     
        
        
                           <div class="map-legend" id='elig_support_tracts_legend'>
            <table>
                <thead>
                    <tr>
                        <td colspan="3"><span class="icon icon-list"></span> <span class="map-legend-name"> Annual Reserve Price in Tracts  &nbsp; &nbsp;</span>
                        <button id="close_elig_support_tracts_btn" class="close"><span class="close">&times;</span> <span class="sr-only">Hide legend</span></button>

                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#EDF8FB"></div>
                        </td>
                        <td>0 - $130,000</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#B2E2E2 "></div>
                        </td>
                        <td>$130,001 - $390,000</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#56B990"></div>
                        </td>
                        <td>$390,000 - $750,000</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#2CA25F"></div>
                        </td>
                        <td>$750,001 - $1,580,000</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#006D2C"></div>
                        </td>
                        <td>$1,580,001 - $4,200,000</td>
                    </tr>
            </table>
        </div>     
        
                             <div class="map-legend" id='elig_locations_tracts_legend'>
            <table>
                <thead>
                    <tr>
                        <td colspan="3"><span class="icon icon-list"></span> <span class="map-legend-name"> Eligible Locations in Tracts &nbsp; &nbsp;</span>
                        <button id='close_elig_locs_tracts_btn'><span class="simmons">&times;</span> <span class="sr-only">Hide legend</span></button>

                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#EDF8FB"></div>
                        </td>
                        <td>0 - 200</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#B3CDE3 "></div>
                        </td>
                        <td>201 - 600</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#8C96C6"></div>
                        </td>
                        <td>601 - 1000</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#8856A7"></div>
                        </td>
                        <td>1001 - 2000</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol" style="background-color:#810F7C"></div>
                        </td>
                        <td>2000 - 2001</td>
                    </tr>
            </table>
        </div>          
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <div class="map-legend" id='split_blocks_legend_high' style="bottom: 200px">
            <table>
                <thead>
                    <tr>
                        <td colspan="3"><span class="icon icon-list"></span> <span class="map-legend-name">Split Blocks Legend &nbsp; &nbsp;</span>
                        <button id="close_split_blocks_high_btn" class="close"><span class="close">&times;</span> <span class="sr-only">Hide legend</span></button>
                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="key-symbol-line" style="border: solid 1px #FF0000"></div>
                        </td>
                        <td>Rate of Return</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol-line" style="border: solid 1px #00FFC5"></div>
                        </td>
                        <td>Tribal</td>
                    </tr>
                    <tr>
                    </tr>
            </table>
        </div> 
        
        
        
                <div class="map-legend" id='split_blocks_legend_low' style="bottom: 110px">
            <table>
                <thead>
                    <tr>
                        <td colspan="3"><span class="icon icon-list"></span> <span class="map-legend-name">Split Blocks Legend &nbsp; &nbsp;</span>
                        <button id="close_split_blocks_low_btn" class="close"><span class="close">&times;</span> <span class="sr-only">Hide legend</span></button>
                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="key-symbol-line" style="border: solid 1px #FF0000"></div>
                        </td>
                        <td>Rate of Return</td>
                    </tr>
                    <tr>
                        <td>
                            <div class="key-symbol-line" style="border: solid 1px #00FFC5"></div>
                        </td>
                        <td>Tribal</td>
                    </tr>
                    <tr>
                    </tr>
            </table>
        </div> 

  
  
        <button id="btn-openLegend" class="btn legend__icon" title="Map Legend"><span class="icon icon-list"></span></button>
    </main>
    
</body>
  
</html>
